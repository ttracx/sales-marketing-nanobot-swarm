<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="theme-color" content="#0f0f1a">
<meta name="description" content="Payment confirmed — Sales & Marketing Nanobot Swarm">
<link rel="icon" type="image/x-icon" href="/images/favicon.ico">
<link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png">
<link rel="apple-touch-icon" href="/images/neuralquantum-icon.png">
<title>Payment Confirmed — Sales &amp; Marketing Nanobot Swarm</title>
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{
  --bg:#0f0f1a;
  --card-bg:#1a1a2e;
  --card-bg2:#16213e;
  --indigo:#6366f1;
  --purple:#8b5cf6;
  --pink:#ec4899;
  --cyan:#06b6d4;
  --emerald:#10b981;
  --amber:#f59e0b;
  --red:#ef4444;
  --text-primary:#e2e8f0;
  --text-secondary:#94a3b8;
  --border:rgba(99,102,241,0.2);
  --grad:linear-gradient(135deg,#6366f1,#8b5cf6,#ec4899);
  --grad-h:linear-gradient(135deg,#818cf8,#a78bfa,#f472b6);
}
html,body{height:100%}
body{font-family:'Inter',system-ui,-apple-system,sans-serif;background:var(--bg);color:var(--text-primary);min-height:100vh;overflow-x:hidden;display:flex;flex-direction:column}
a{color:inherit;text-decoration:none}
button{cursor:pointer;border:none;font-family:inherit}
::-webkit-scrollbar{width:6px}
::-webkit-scrollbar-track{background:var(--card-bg)}
::-webkit-scrollbar-thumb{background:var(--indigo);border-radius:3px}

/* TOPBAR */
#topbar{position:fixed;top:0;left:0;right:0;height:60px;background:rgba(15,15,26,0.95);backdrop-filter:blur(20px);border-bottom:1px solid var(--border);display:flex;align-items:center;padding:0 20px;gap:16px;z-index:100}
#logo-wrap{display:flex;align-items:center;gap:10px;flex-shrink:0}
#logo-wrap svg{width:34px;height:34px;flex-shrink:0}
#brand-name{font-size:15px;font-weight:700;background:var(--grad);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;white-space:nowrap}
#topbar-right{display:flex;align-items:center;gap:8px;margin-left:auto}
.nav-link{padding:7px 14px;border-radius:8px;font-size:13px;font-weight:500;color:var(--text-secondary);background:transparent;transition:all .2s;white-space:nowrap}
.nav-link:hover{color:var(--text-primary);background:rgba(99,102,241,0.1)}

/* PAGE */
#page{flex:1;display:flex;align-items:center;justify-content:center;padding:80px 20px 60px;background:radial-gradient(ellipse 70% 60% at 50% 0%,rgba(99,102,241,0.08) 0%,transparent 70%)}

/* CARD */
.success-card{width:100%;max-width:560px;background:var(--card-bg);border:1px solid var(--border);border-radius:20px;padding:40px 36px;text-align:center}

/* VERIFYING STATE */
#state-verifying{display:flex;flex-direction:column;align-items:center;gap:20px}
.spinner-ring{position:relative;width:72px;height:72px}
.spinner-ring::before{
  content:'';
  position:absolute;inset:0;
  border-radius:50%;
  background:var(--grad);
  opacity:.15;
  animation:pulseRing 1.4s ease-in-out infinite;
}
.spinner-ring::after{
  content:'';
  position:absolute;inset:4px;
  border-radius:50%;
  border:3px solid transparent;
  border-top-color:#6366f1;
  border-right-color:#8b5cf6;
  animation:spinRing .9s linear infinite;
}
@keyframes pulseRing{0%,100%{transform:scale(1);opacity:.15}50%{transform:scale(1.12);opacity:.28}}
@keyframes spinRing{to{transform:rotate(360deg)}}
.verifying-text{font-size:16px;color:var(--text-secondary)}

/* SUCCESS STATE */
#state-success{display:none;flex-direction:column;align-items:center;gap:0}
.check-circle{position:relative;width:88px;height:88px;margin-bottom:24px}
.check-circle-bg{position:absolute;inset:0;border-radius:50%;background:var(--grad);opacity:.15}
.check-circle-ring{position:absolute;inset:0;border-radius:50%;background:var(--grad);opacity:.25;transform:scale(1.18)}
.check-circle svg{position:absolute;inset:0;width:100%;height:100%}
.check-path{stroke-dasharray:56;stroke-dashoffset:56;animation:drawCheck .6s ease forwards .2s}
@keyframes drawCheck{to{stroke-dashoffset:0}}

.success-heading{font-size:26px;font-weight:800;margin-bottom:10px;background:var(--grad);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.plan-badge{display:inline-flex;align-items:center;gap:6px;padding:5px 16px;border-radius:20px;background:var(--grad);color:#fff;font-size:13px;font-weight:700;margin-bottom:18px}
.receipt-block{background:rgba(0,0,0,0.25);border:1px solid var(--border);border-radius:12px;padding:16px 20px;width:100%;margin-bottom:22px;text-align:left;display:flex;flex-direction:column;gap:10px}
.receipt-row{display:flex;align-items:center;justify-content:space-between;font-size:14px}
.receipt-label{color:var(--text-secondary)}
.receipt-value{color:var(--text-primary);font-weight:600}
.receipt-amount{font-size:20px;font-weight:800;background:var(--grad);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.divider-line{height:1px;background:var(--border);width:100%}

.features-block{width:100%;text-align:left;margin-bottom:26px}
.features-title{font-size:13px;font-weight:700;color:var(--text-secondary);text-transform:uppercase;letter-spacing:.5px;margin-bottom:12px}
.feature-item{display:flex;align-items:flex-start;gap:9px;font-size:13px;color:var(--text-primary);margin-bottom:8px;line-height:1.4}
.feature-check{width:18px;height:18px;border-radius:50%;background:rgba(16,185,129,0.15);color:var(--emerald);display:flex;align-items:center;justify-content:center;font-size:11px;flex-shrink:0;margin-top:1px;font-weight:700}

.action-btns{display:flex;flex-direction:column;gap:10px;width:100%}
.btn-grad{display:block;text-align:center;padding:13px 20px;border-radius:10px;font-size:14px;font-weight:700;background:var(--grad);color:#fff;transition:all .2s}
.btn-grad:hover{background:var(--grad-h);transform:translateY(-1px);box-shadow:0 4px 20px rgba(99,102,241,0.4)}
.btn-ghost{display:block;text-align:center;padding:12px 20px;border-radius:10px;font-size:14px;font-weight:600;background:transparent;color:var(--indigo);border:1px solid rgba(99,102,241,0.35);transition:all .2s}
.btn-ghost:hover{background:rgba(99,102,241,0.08);border-color:var(--indigo)}
.btn-text-link{font-size:13px;color:var(--text-secondary);transition:color .2s;text-align:center;display:block;padding:4px 0}
.btn-text-link:hover{color:var(--text-primary)}

/* ERROR STATE */
#state-error{display:none;flex-direction:column;align-items:center;gap:0}
.error-circle{position:relative;width:80px;height:80px;margin-bottom:22px}
.error-circle-bg{position:absolute;inset:0;border-radius:50%;background:rgba(239,68,68,0.12);border:2px solid rgba(239,68,68,0.25)}
.error-circle svg{position:absolute;inset:0;width:100%;height:100%}
.error-heading{font-size:22px;font-weight:700;color:var(--text-primary);margin-bottom:10px}
.error-msg{font-size:14px;color:var(--text-secondary);line-height:1.6;margin-bottom:22px;max-width:380px}
.support-link{color:var(--indigo);font-weight:600}
.support-link:hover{text-decoration:underline}

/* FOOTER */
footer{background:var(--card-bg);border-top:1px solid var(--border);padding:28px 24px;margin-top:auto}
.footer-inner{max-width:1100px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;gap:24px;flex-wrap:wrap}
.footer-brand{display:flex;align-items:center;gap:10px}
.footer-logo-icon{width:28px;height:28px;border-radius:6px;background:var(--grad);display:flex;align-items:center;justify-content:center;font-size:13px;font-weight:700;color:#fff;flex-shrink:0}
.footer-brand-name{font-size:13px;font-weight:600;color:var(--text-primary)}
.footer-brand-sub{font-size:11px;color:var(--text-secondary)}
.footer-links{display:flex;gap:20px;flex-wrap:wrap}
.footer-links a{font-size:13px;color:var(--text-secondary);transition:color .2s}
.footer-links a:hover{color:var(--text-primary)}
.footer-copy{font-size:12px;color:var(--text-secondary);text-align:right}
@media(max-width:600px){.footer-inner{flex-direction:column;align-items:flex-start}.footer-copy{text-align:left}.success-card{padding:28px 20px}}
</style>
</head>
<body>

<!-- TOPBAR -->
<div id="topbar">
  <div id="logo-wrap">
    <svg viewBox="0 0 38 38" fill="none" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <linearGradient id="lg1s" x1="0" y1="0" x2="38" y2="38" gradientUnits="userSpaceOnUse">
          <stop offset="0%" stop-color="#6366f1"/>
          <stop offset="50%" stop-color="#8b5cf6"/>
          <stop offset="100%" stop-color="#ec4899"/>
        </linearGradient>
        <linearGradient id="lg2s" x1="38" y1="0" x2="0" y2="38" gradientUnits="userSpaceOnUse">
          <stop offset="0%" stop-color="#ec4899"/>
          <stop offset="100%" stop-color="#6366f1"/>
        </linearGradient>
      </defs>
      <circle cx="19" cy="19" r="18" fill="url(#lg1s)" opacity="0.12"/>
      <circle cx="19" cy="19" r="4.5" fill="url(#lg1s)"/>
      <circle cx="8" cy="12" r="3" fill="#6366f1" opacity="0.9"/>
      <circle cx="30" cy="12" r="3" fill="#ec4899" opacity="0.9"/>
      <circle cx="8" cy="26" r="3" fill="#8b5cf6" opacity="0.9"/>
      <circle cx="30" cy="26" r="3" fill="#6366f1" opacity="0.9"/>
      <circle cx="19" cy="5" r="2.5" fill="#ec4899" opacity="0.8"/>
      <circle cx="19" cy="33" r="2.5" fill="#8b5cf6" opacity="0.8"/>
      <line x1="8" y1="12" x2="19" y2="19" stroke="url(#lg1s)" stroke-width="1.2" opacity="0.7"/>
      <line x1="30" y1="12" x2="19" y2="19" stroke="url(#lg2s)" stroke-width="1.2" opacity="0.7"/>
      <line x1="8" y1="26" x2="19" y2="19" stroke="url(#lg1s)" stroke-width="1.2" opacity="0.7"/>
      <line x1="30" y1="26" x2="19" y2="19" stroke="url(#lg2s)" stroke-width="1.2" opacity="0.7"/>
      <line x1="19" y1="5" x2="19" y2="19" stroke="url(#lg1s)" stroke-width="1.2" opacity="0.7"/>
      <line x1="19" y1="33" x2="19" y2="19" stroke="url(#lg1s)" stroke-width="1.2" opacity="0.7"/>
      <line x1="8" y1="12" x2="8" y2="26" stroke="#6366f1" stroke-width="0.8" opacity="0.35"/>
      <line x1="30" y1="12" x2="30" y2="26" stroke="#ec4899" stroke-width="0.8" opacity="0.35"/>
      <line x1="8" y1="12" x2="30" y2="26" stroke="#8b5cf6" stroke-width="0.6" opacity="0.2"/>
      <line x1="30" y1="12" x2="8" y2="26" stroke="#8b5cf6" stroke-width="0.6" opacity="0.2"/>
    </svg>
    <span id="brand-name">Sales &amp; Marketing Nanobot Swarm</span>
  </div>
  <div id="topbar-right">
    <a href="/dashboard" class="nav-link">&#8592; Dashboard</a>
  </div>
</div>

<!-- PAGE -->
<div id="page">
  <div class="success-card">

    <!-- VERIFYING STATE -->
    <div id="state-verifying">
      <div class="spinner-ring"></div>
      <p class="verifying-text">Verifying your payment...</p>
    </div>

    <!-- SUCCESS STATE -->
    <div id="state-success">
      <div class="check-circle">
        <div class="check-circle-ring"></div>
        <div class="check-circle-bg"></div>
        <svg viewBox="0 0 88 88" fill="none" xmlns="http://www.w3.org/2000/svg">
          <defs>
            <linearGradient id="checkGrad" x1="0" y1="0" x2="88" y2="88" gradientUnits="userSpaceOnUse">
              <stop offset="0%" stop-color="#6366f1"/>
              <stop offset="50%" stop-color="#8b5cf6"/>
              <stop offset="100%" stop-color="#ec4899"/>
            </linearGradient>
          </defs>
          <circle cx="44" cy="44" r="32" fill="url(#checkGrad)" opacity="0.22"/>
          <polyline class="check-path" points="28,44 40,56 60,34" fill="none" stroke="url(#checkGrad)" stroke-width="4.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
      <div class="success-heading">&#127881; Payment Confirmed!</div>
      <div class="plan-badge" id="plan-badge">Growth Monthly</div>
      <div class="receipt-block">
        <div class="receipt-row">
          <span class="receipt-label">Amount paid</span>
          <span class="receipt-value receipt-amount" id="receipt-amount">&#8212;</span>
        </div>
        <div class="divider-line"></div>
        <div class="receipt-row">
          <span class="receipt-label">Account</span>
          <span class="receipt-value" id="receipt-email">&#8212;</span>
        </div>
      </div>
      <div class="features-block">
        <div class="features-title">What&#8217;s included in your plan</div>
        <div id="features-list"></div>
      </div>
      <div class="action-btns">
        <a href="/dashboard" class="btn-grad">&#8594; Go to Dashboard</a>
        <a href="/onboard" class="btn-ghost">&#8594; Launch Your First Campaign</a>
        <a href="/profile" class="btn-text-link">View your account</a>
      </div>
    </div>

    <!-- ERROR STATE -->
    <div id="state-error">
      <div class="error-circle">
        <div class="error-circle-bg"></div>
        <svg viewBox="0 0 80 80" fill="none" xmlns="http://www.w3.org/2000/svg">
          <line x1="26" y1="26" x2="54" y2="54" stroke="#ef4444" stroke-width="4.5" stroke-linecap="round"/>
          <line x1="54" y1="26" x2="26" y2="54" stroke="#ef4444" stroke-width="4.5" stroke-linecap="round"/>
        </svg>
      </div>
      <div class="error-heading">Payment verification failed</div>
      <p class="error-msg">
        Your payment may still have gone through. Check your email for a receipt, or
        <a href="mailto:support@neuralquantum.ai" class="support-link">contact support</a> if you need help.
      </p>
      <div class="action-btns">
        <a href="/pricing" class="btn-grad">&#8592; Back to Pricing</a>
        <a href="/dashboard" class="btn-ghost">Return to Dashboard</a>
      </div>
    </div>

  </div>
</div>

<!-- FOOTER -->
<footer>
  <div class="footer-inner">
    <div class="footer-brand">
      <div class="footer-logo-icon">NQ</div>
      <div>
        <div class="footer-brand-name">Sales &amp; Marketing Nanobot Swarm</div>
        <div class="footer-brand-sub">Powered by VibeCaaS.com / NeuralQuantum.ai LLC</div>
      </div>
    </div>
    <div class="footer-links">
      <a href="/">Dashboard</a>
      <a href="/pricing">Pricing</a>
      <a href="/docs">Docs</a>
      <a href="/faq">FAQ</a>
    </div>
    <div class="footer-copy">
      &copy; 2025 NeuralQuantum.ai LLC &amp; VibeCaaS.com<br>
      All rights reserved.
    </div>
  </div>
</footer>

<script>
var PLAN_LABELS = {
  campaign: 'Campaign Pack',
  weekly:   'Starter Weekly',
  growth:   'Growth Monthly',
  agency:   'Agency Annual'
};

var PLAN_FEATURES = {
  campaign: ['10 swarm runs, no expiry','All 10 agent teams','Full AI output (copy & export)','No subscription required'],
  weekly:   ['25 swarm runs per week','All 10 agent teams','Agent + team builder','Cancel anytime'],
  growth:   ['Unlimited swarm runs','All 10 agent teams','Custom agent & team builder','Priority AI backend \u00b7 5 seats'],
  agency:   ['Everything in Growth','White-label API access','CRM integrations (HubSpot/Salesforce)','Scheduled campaigns + webhooks']
};

function showState(name) {
  var states = ['verifying', 'success', 'error'];
  for (var i = 0; i < states.length; i++) {
    var el = document.getElementById('state-' + states[i]);
    if (el) {
      el.style.display = (states[i] === name) ? 'flex' : 'none';
    }
  }
}

function populateSuccess(data) {
  var planKey = (data.plan || '').toLowerCase();
  var planLabel = PLAN_LABELS[planKey] || data.plan || 'Your Plan';
  var features = PLAN_FEATURES[planKey] || [];

  document.getElementById('plan-badge').textContent = planLabel;

  var amountRaw = data.amount_paid;
  var amountStr = '\u2014';
  if (amountRaw !== undefined && amountRaw !== null) {
    if (typeof amountRaw === 'number') {
      amountStr = '$' + (amountRaw / 100).toFixed(2);
    } else {
      amountStr = String(amountRaw);
    }
  }
  document.getElementById('receipt-amount').textContent = amountStr;
  document.getElementById('receipt-email').textContent = data.email || '\u2014';

  var list = document.getElementById('features-list');
  list.textContent = '';
  for (var j = 0; j < features.length; j++) {
    var item = document.createElement('div');
    item.className = 'feature-item';

    var checkSpan = document.createElement('span');
    checkSpan.className = 'feature-check';
    checkSpan.textContent = '\u2713';

    var textSpan = document.createElement('span');
    textSpan.textContent = features[j];

    item.appendChild(checkSpan);
    item.appendChild(textSpan);
    list.appendChild(item);
  }

  showState('success');
}

(function init() {
  var params = new URLSearchParams(window.location.search);
  var sessionId = params.get('session_id');

  if (!sessionId) {
    showState('error');
    return;
  }

  fetch('/checkout/success?session_id=' + encodeURIComponent(sessionId), {
    method: 'GET',
    headers: { 'Accept': 'application/json' }
  })
  .then(function(res) {
    if (!res.ok) { throw new Error('non-200'); }
    return res.json();
  })
  .then(function(data) {
    if (data && (data.plan || data.email)) {
      if (data.token) {
        localStorage.setItem('sm_auth_token', data.token);
      }
      if (data.user) {
        localStorage.setItem('sm_user', JSON.stringify(data.user));
      }
      populateSuccess(data);
    } else {
      showState('error');
    }
  })
  .catch(function() {
    showState('error');
  });
})();
</script>
</body>
</html>
